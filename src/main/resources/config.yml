# ----------------------------------------------------------------------
# LPC Reloaded Configuration & Documentation
# ----------------------------------------------------------------------
#
# 1. FORMATTING (MiniMessage)
#    LPC uses Kyori MiniMessage for all colors and decorations.
#    - Legacy codes like '&c' are NOT supported in the config.
#    - Use tags like '<red>', '<bold>', or Hex: '<#FF5555>'.
#    - Gradients: '<gradient:#FF5555:#FFAA00>Text</gradient>'
#    - Hover/Click: '<hover:show_text:"Hi">Click Me</hover>'
#    - PREVIEW: https://webui.advntr.dev/
#
# 2. REGULAR EXPRESSIONS (Regex)
#    The filter system uses Java-style Regex.
#    - TESTER: https://regex101.com/ (Select Java flavor)
#    - Use 'regex:' prefix in blocked-words to enable regex mode.
#    - Example: 'regex:\b(word)\b' matches the exact word only.
#
# 3. CHAT BUBBLES
#    - Requires Minecraft 1.19.4 or newer.
#    - Background Color uses RGBA (Red, Green, Blue, Alpha).
#    - Alpha (0-255) controls transparency.
#
# 4. PLACEHOLDERS
#    - {message}, {name}, {displayname}, {world}
#    - {prefix}, {suffix}, {prefixes}, {suffixes}
#    - {username-color}, {message-color}
#
# 5. SPECIAL PLACEHOLDERS
#    - [item]: Displays the sender's main hand item with hover details.
#    - Requires permission: lpc.itemplaceholder
#    - Toggle: 'use-item-placeholder' setting below.
# ----------------------------------------------------------------------

# Main chat format used if channels are disabled or for the default global channel.
# Supports all MiniMessage tags.
chat-format: "{prefix}{name}<dark_gray> »<reset> {message}"

# Configuration for private messaging (/msg, /reply).
# Placeholders: {message} - the message, {sender} - sender name, {receiver} - receiver name.
private-message-formats:
  sender: "<gray>You to {receiver}: <white>{message}"
  receiver: "<gray>{sender} to You: <white>{message}"

# Format per LuckPerms group. Group names must be lowercase.
# Takes priority over 'chat-format'.
group-formats:
#  default: "[default] {name}<dark_gray> »<reset> {message}"
#  admin: "[admin] {name}<dark_gray> »<reset> {message}"

# Format per LuckPerms track. 
# Group formatting takes priority over track formatting.
track-formats:
#  staff_track: "[staff] {name}<dark_gray> »<reset> {message}"
#  donator_track: "{donator_rank} {name}<dark_gray> »<reset> {message}"

# Whether players can use [item] in chat to showcase their held item.
# Requires 'lpc.itemplaceholder' permission.
use-item-placeholder: true

# The message sent to the sender after successfully running '/lpc reload'.
reload-message: "<green>Reloaded LPC Configuration!"

# ----------------------------------------------------------------------
# General Messages
# ----------------------------------------------------------------------
# Common messages used across various commands and features.
general-messages:
  no-permission: "<red>You do not have permission to do that!"
  only-players: "<red>This command can only be used by players."
  player-not-found: "<red>Player not found."
  usage: "<red>Usage: {usage}"

# ----------------------------------------------------------------------
# Chat Channels
# ----------------------------------------------------------------------
# Channels allow separating chat into different streams (Global, Staff, Local).
channels:
  # Set to true to enable the channel system.
  enabled: true
  
  # Messages related to chat channels.
  messages:
    disabled: "<red>Chat channels are disabled."
    not-found: "<red>Channel not found."
    no-permission-join: "<red>You do not have permission to join this channel."
    no-permission-speak: "<red>You do not have permission to speak in this channel."
    switched: "<green>Switched to channel: <white>{channel}"
    current: "<gray>You are currently talking in: <white>{channel}"
    no-channel: "<red>No channel available."

  # The channel players are placed in by default.
  default-channel: "global"
  
  # How to persist player channel choices across sessions.
  # Options: 
  #   MEMORY - Reset on restart.
  #   SQLITE - Save to a local file (best for single servers).
  #   MYSQL  - Save to an external database (best for networks).
  storage:
    type: "SQLITE"
    file: "channels.db" # Name of the file for SQLITE storage.
    mysql:
      host: "localhost"
      port: 3306
      database: "lpc"
      username: "minecraft" # please do not use your root credentials
      password: ""
      table-prefix: "lpc_"

  # List of defined channels.
  list:
    global:
      # 'global' type sends to everyone on the server.
      type: "global"
      permission: ""
      format: "{prefix}{name}<dark_gray> »<reset> {message}"
      # Shortcut allows switching focus: /g
      shortcut: "g" 
      # Symbol allows quick messaging: !hello world
      symbol: "!" 
    staff:
      # 'permission' type requires a specific permission to read and join.
      type: "permission"
      permission: "lpc.channel.staff"
      format: "<red>[Staff] {name}: <white>{message}"
      shortcut: "sc"
      symbol: "#"
    local:
      # 'range' type limits recipients based on blocks distance from sender.
      type: "range"
      range: 100
      format: "<yellow>[L] {name}: <white>{message}"
      shortcut: "l"
      symbol: ""

# ----------------------------------------------------------------------
# Feature Expansions
# ----------------------------------------------------------------------

# Highlight player names in chat when mentioned.
mentions:
  enabled: true
  # How the mentioned name should appear.
  format: "<gradient:#FFD700:#FF8C00><b>@{name}</b></gradient>"
  # Sound played to the mentioned player. Use Bukkit sound names.
  sound: "entity.experience_orb.pickup"
  volume: 1.0
  pitch: 1.0
  # Whether to suggest player names when typing @ in chat.
  # For instance, LPC will suggest @Hello123 when @He is typed and [TAB] is pressed
  # This works in a similar manner as command tab completion.
  tab-complete: true

# Allows staff to monitor private messages between players.
social-spy:
  # The format seen by spies. {sender}, {receiver}, and {message} are available.
  format: "<gradient:#555555:#AAAAAA>[Spy]</gradient> <#AAAAAA>{sender} -> {receiver}: <#FFFFFF>{message}"
  messages:
    enabled: "<green>Social Spy enabled."
    disabled: "<red>Social Spy disabled."

# Add click and hover interactions to player names in chat.
interactive:
  enabled: true
  # Action when clicking a player's name: SUGGEST_COMMAND, RUN_COMMAND, OPEN_URL.
  # SUGGEST_COMMAND sends the `/msg thatPlayerName` to the player's chat, though it doesn't run it
  # RUN_COMMAND is not advised, it runs `/msg playerName` without anything, defeating the purpose
  # OPEN_URL is definately not advised. A playername is typically not a URL.
  click-action: SUGGEST_COMMAND 
  # The value for the click action. {name} is replaced by the player's name.
  click-value: "/msg {name} "
  # Lines displayed when hovering over a name. Supports MiniMessage and PlaceholderAPI.
  hover-text:
    - "<gradient:#AAAAAA:#FFFFFF>Rank: {prefix}</gradient>"
    - "<#AAAAAA>Bio: <#FFFFFF>{bio}"
    - "{infractions}"
    - "<#AAAAAA>Click to message!"

# Legacy Staff Chat system (Used if 'channels' is disabled).
staff-chat:
  enabled: true
  format: "<gradient:#AA0000:#FF5555>[Staff] {name}:</gradient> <#FF5555>{message}"
  prefix: "#" # Using # at start of message sends to staff chat.
  messages:
    disabled: "<red>Staff chat is disabled."

# Allow players to block messages from specific individuals.
ignore:
  enabled: true
  messages:
    ignored: "<gradient:#FF5555:#AA0000>You are now ignoring {player}.</gradient>"
    unignored: "<gradient:#55FF55:#00AA00>You are no longer ignoring {player}.</gradient>"
    cannot-ignore-self: "<#FF5555>You cannot ignore yourself!"
    already-ignored: "<#FF5555>You are already ignoring {player}."
    not-ignored: "<#FF5555>You are not ignoring {player}."
    player-offline: "<red>Player is no longer online."
    player-ignoring: "<red>This player is ignoring you."

# Automated moderation for chat messages.
filter:
  enabled: true
  # Minimum time between messages (in seconds).
  cooldown: 1.5 
  
  # Prevent excessive capital letters.
  caps-limit:
    enabled: true
    percentage: 70
    min-length: 5
    deny-message: "<#FF5555>Please don't use so many capital letters!"

  # Prevent Discord invite links.
  anti-discord:
    enabled: true
    regex: "discord(?:\\.gg|app\\.com\\/invite|\\.com\\/invite)\\/[a-zA-Z0-9]+"
    deny-message: "<gradient:#FF5555:#AA0000>Discord invites are not allowed!</gradient>"
  
  # Prevent general website links.
  anti-link:
    enabled: true
    regex: "(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)"
    deny-message: "<gradient:#FF5555:#AA0000>Links are not allowed in chat!</gradient>"
  
  # List of words to block or replace.
  blocked-words:
    - "badword1"
    - "regex:\\b(f[u*]ck)\\b" # Use 'regex:' for advanced matching.
  
  # What blocked words are replaced with.
  replacement: "****"
  
  # Message sent to players when they chat too fast. {time} is time left.
  deny-message: "<red>Please wait {time}s before sending another message."

# ----------------------------------------------------------------------
# Moderation Suite
# ----------------------------------------------------------------------
# This suite provides tools for staff to manage player behavior.
# Each feature can be enabled or disabled independently.

# Muting players prevents them from sending messages in chat.
mutes:
  # Set to false to disable the /mute and /unmute commands.
  enabled: true
  
  # Default reason used if a staff member doesn't provide one.
  default-reason: "No reason provided"
  
  # Messages sent during mute-related actions.
  # Placeholders: {reason}, {time} (expiry duration), {player}, {staff}
  messages:
    # Sent to a player when they try to chat while temporarily muted.
    muted: "<gradient:#FF5555:#AA0000>You are muted!</gradient> <#AAAAAA>Reason: <#FFFFFF>{reason} <#AAAAAA>Expires: <#FFFFFF>{time}"
    # Sent to a player when they try to chat while permanently muted.
    permanent: "<gradient:#FF5555:#AA0000>You are permanently muted!</gradient> <#AAAAAA>Reason: <#FFFFFF>{reason}"
    # Error message if the target player is not muted.
    not-muted: "<#FF5555>{player} is not muted."
    # Sent to a player when they are unmuted.
    unmuted: "<#55FF55>You have been unmuted."
    # Broadcast message when a player is muted. Visible to users with 'lpc.mute' permission.
    broadcast-mute: "<#FF5555>{player} has been muted by {staff} for {reason} ({time})."
    # Broadcast message when a player is unmuted. Visible to users with 'lpc.mute' permission.
    broadcast-unmute: "<#55FF55>{player} has been unmuted by {staff}."
    disabled: "<red>Muting is currently disabled."

# Generic moderation messages
moderation:
  messages:
    slowmode-set: "<green>Slowmode for {player} set to {seconds}s."
    invalid-seconds: "<red>Invalid seconds."

# Warnings allow staff to log infractions without necessarily muting.
warnings:
  # Set to false to disable /warn, /warnings, and /delwarn.
  enabled: true
  
  # Messages sent during warning-related actions.
  # Placeholders: {reason}, {player}, {staff}, {id}
  messages:
    # Sent to the player when they receive a warning.
    warned: "<gradient:#FF5555:#AA0000>You have been warned!</gradient> <#AAAAAA>Reason: <#FFFFFF>{reason}"
    # Broadcast message when a player is warned. Visible to users with 'lpc.warn' permission.
    broadcast: "<#FF5555>{player} has been warned by {staff} for {reason}."
    # Sent to staff when a warning is successfully deleted.
    deleted: "<#55FF55>Warning #{id} has been deleted."
    # Error message if the warning ID does not exist.
    not-found: "<#FF5555>Warning #{id} not found."
    disabled: "<red>Warnings are currently disabled."
    no-warnings: "<gray>No warnings for {player}."
    header: "<gold>Warnings for {player}:"
    item: "<yellow>#{id} - <white>{reason} <gray>({date})"
    invalid-id: "<red>Invalid ID."

# Player profiles allow users to set bios and staff to view infraction history.
profiles:
  # Set to false to disable /profile and /setbio.
  enabled: true
  
  # --- Hover Profile Infractions ---
  # These settings control how {infractions} is rendered in 'interactive.hover-text'.
  # ONLY players with the 'lpc.staff.viewinfractions' permission can see this content.
  
  # Format for each individual warning line.
  # Placeholders: {reason}, {date}
  infraction-format: "<red>• {reason} <dark_gray>({date})</dark_gray>"
  
  # The maximum number of recent warnings to display in the hover text.
  max-hover-infractions: 3
  
  # Text displayed if the player has no recent warnings.
  no-infractions: "<gray>No recent infractions."
  
  # --- Profile Settings ---
  
  # Messages sent during profile-related actions.
  messages:
    bio-set: "<#55FF55>Your bio has been updated!"
    disabled: "<red>Profiles are currently disabled."
    header: "<gold>Profile: {player}"
    bio: "<gray>Bio: <white>{bio}"
    no-bio: "No bio set."
    warnings: "<gray>Warnings: <white>{count}"
    mute: "<gray>Mute: <red>{reason} (Expires: {time})"

# Automatically turn URLs in chat into clickable links.
url-highlighting:
  enabled: true
  # The format of the highlighted link. {url} is the link.
  format: "<underlined><gradient:#55FFFF:#00AAAA>{url}</gradient></underlined>"
  # Hover text for the link.
  hover-text: "<#AAAAAA>Click to open: <#FFFFFF>{url}"

# Customize or enable join and leave messages.
join-quit-messages:
  enabled: true
  join: "<#AAAAAA>[<#55FF55>+</#55FF55>] <gradient:#55FF55:#FFFFFF>{prefix}{name}</gradient>"
  quit: "<#AAAAAA>[<#FF5555>-</#FF5555>] <gradient:#FF5555:#FFFFFF>{prefix}{name}</gradient>"
  first-join: "<gradient:#FFAA00:#FFD700>Welcome {name} to the server!</gradient>"

# Automatic server-wide broadcasts.
announcer:
  enabled: true
  # Interval between messages (in seconds).
  interval: 300 
  # How to pick the next message: 'random', 'ordered', or 'reverse'.
  # Random - does what it says
  # Ordered - Does it top to bottom
  # Reverse - Does it bottom to top
  selection-strategy: "ordered" 
  messages:
    - "<gradient:#55FFFF:#00AAAA>Tip: Use /help to see available commands!</gradient>"
    - "<gradient:#55FF55:#00AA00>Join our Discord: discord.gg/example</gradient>"
    - "<gradient:#FFAA00:#FFD700>Visit our wiki for tutorials!</gradient>"

# Configuration for the '/chatclear' command.
chat-clear:
  # Message broadcasted when chat is cleared. {staff} is the staff member.
  broadcast: "<gradient:#FF5555:#AA0000>The chat has been cleared by {staff}.</gradient>"
  # Number of empty lines sent to clear the chat.
  # Sending too many lines **might** crash the client
  lines: 100

# Chat Bubbles (Text Display Entities)
# Requires Minecraft 1.19.4 or newer.
chat-bubbles:
  enabled: true
  # How long (in seconds) the bubble stays above the player's head.
  duration: 5.0 
  # Height offset (in blocks) above the player's head.
  height-offset: 2.8 
  # Background color in RGBA (Red, Green, Blue, Alpha). 0-255, or it will break.
  background-color: "0,0,0,100" 
  # Whether the bubble can be seen through solid walls.
  see-through: false
  # Whether a player can see their own chat bubbles.
  see-self: true
  # Whether the text should have a drop shadow.
  shadow: true
  # Visual size of the bubble.
  scale: 1.0
  # Billboard behavior: 
  #   CENTER - Rotates to face player.
  #   VERTICAL - Rotates only left/right.
  #   HORIZONTAL - Rotates only up/down.
  #   FIXED - No rotation.
  billboard: "CENTER"
  # Max width of the text before it wraps to a new line (approx. pixels).
  text-wrap-width: 200 
  # behavior: 
  #   'replace' - New bubble removes the old one.
  #   'stack' - Not fully implemented yet.
  behavior: "replace"
  messages:
    toggle: "<gray>Chat bubbles are now {status}<gray>."
